<UserControl x:Class="Mordorings.Modules.EditMap.EditMapControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:local="clr-namespace:Mordorings.Modules.EditMap"
             xmlns:controls="clr-namespace:Mordorings.Controls"
             mc:Ignorable="d" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance local:EditMapViewModel}">
    <UserControl.Resources>
        <Style TargetType="Label" BasedOn="{StaticResource ResourceKey=LabelNoPadding}" />
    </UserControl.Resources>
    <DockPanel>
        <StackPanel DockPanel.Dock="Right">
            <Canvas Height="50" Width="300">
                <Button Content="Save" Width="30"
                        Canvas.Left="10" Canvas.Top="20"
                        Command="{Binding Path=SaveCommand}" />
                <Button Content="Reset Floor" Width="63"
                        Canvas.Left="45" Canvas.Top="20"
                        Command="{Binding Path=ResetFloorCommand}" />
                <Button Content="Reset All" Width="50"
                        Canvas.Left="113" Canvas.Top="20"
                        Command="{Binding Path=ResetAllFloorsCommand}" />
            </Canvas>
            <local:EditTileControl Width="300" Height="402" />
        </StackPanel>
        <DockPanel>
        <Grid DockPanel.Dock="Top" Width="{Binding ElementName=ImageMap, Path=ActualWidth}" HorizontalAlignment="Left">
            <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                <Label Content="Floor" HorizontalAlignment="Center" />
                <StackPanel Orientation="Horizontal">
                    <Button Content="&lt;" Command="{Binding Path=DecreaseFloorCommand}" />
                    <TextBox Width="20"
                             d:Text="15"
                             HorizontalContentAlignment="Center" Margin="5,0,5,0">
                        <TextBox.Text>
                            <Binding Path="SelectedFloorNum" UpdateSourceTrigger="PropertyChanged">
                                <Binding.Converter>
                                    <controls:StringToIntConverter EmptyStringValue="0" />
                                </Binding.Converter>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>
                    <Button Content="&gt;"
                            Command="{Binding Path=IncreaseFloorCommand}" />
                </StackPanel>
            </StackPanel>
        </Grid>
        <Grid DockPanel.Dock="Left">
            <Image Name="ImageMap"
                   Source="{Binding Path=Image, FallbackValue={x:Null}}"
                   MinWidth="421" MinHeight="421"
                   d:Source="c:\temp\floor1.png" HorizontalAlignment="Left" VerticalAlignment="Top">
                <b:Interaction.Triggers>
                    <b:EventTrigger EventName="MouseLeftButtonDown">
                        <b:EventTrigger.Actions>
                            <b:InvokeCommandAction Command="{Binding Path=GetImageMouseClickCommand}" PassEventArgsToCommand="True" />
                        </b:EventTrigger.Actions>
                    </b:EventTrigger>
                </b:Interaction.Triggers>
            </Image>
        </Grid>
        </DockPanel>
    </DockPanel>
</UserControl>
